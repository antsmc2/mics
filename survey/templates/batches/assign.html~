{% extends 'form.html' %}
{% block title %}
    Select Questions for {{ batch.survey.name.capitalize }} - {{ batch.name.capitalize }}
{% endblock %}
{% block extra_css %}
	<link rel="stylesheet" href="{{ STATIC_URL }}js/redips_drag/style.css">
{% endblock %}
{% block pre_form_content %}
	<div class="filter-form">
		{% include "horizontal_naked_form.html" with a_form=question_filter_form %}
        
    </div>
    <div class="search">
    	&nbsp;&nbsp;{% include "search_form.html" with id="library_search_form" %} 
    </div>
       <div id="redips-drag" class="clear">
       	<br />
  		<table id="lib_questions_table" width ="100%">
		<thead  class="redips-mark">
			<th  class="redips-mark"  colspan="2">Identifier</th>
			<th class="redips-mark">Text</th>
			<th class="redips-mark">Answer Type</th>
		</thead>
		<tbody>
			{% for question in library_questions %} 
				<tr class="rd ms-selectable" id="{{question.pk}}-selectable">
					<td class="redips-rowhandler"><div class="redips-drag redips-row"></div>
					<input type="hidden" name="identifier" value="{{question.identifier}}" />
					<input type="hidden" name="text" value="{{question.text}}" />
					<input type="hidden" name="answer_type" value="{{question.answer_type}}" />
					<input type="hidden" name="module" value="{{question.module}}" />
					<input type="hidden" name="group" value="{{question.group}}" />
					</td>
					<td>{{question.identifier}}</td>
					<td>{{question.text}}</td>
					<td>{{question.answer_type}}</td>
				</tr>
			{% endfor %}
				<tr class="rd">
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
			<tr>
				<td colspan="6" class="redips-mark"><span id="msg"></span></td>
			</tr>
		</tbody>
	</table>
		<br/>
{% endblock %}
{% block display_form_fields %}
    			<table id="batch_questions" width ="100%">
					<thead  class="redips-mark">
						<th colspan="4"  class="redips-mark">Drop Questions Here</th>
					</thead>
					<tbody>
						<tr class="rd">
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="4" class="redips-mark"></td>
						</tr>
					</tbody>
				</table>
				<input type="hidden" value="{{ batch.id }}" id="batch_id">
{% endblock %}
{% block non_form_content %}
</div>
{% endblock %}
{% block javascripts %}
		<script type="text/javascript">
			$('#assign-question-to-batch-form').submit(function(){alert($(this).serialize());});
		</script>
		<script type="text/javascript" src="{{ STATIC_URL }}js/batch.js"></script>
		<script type="text/javascript" src="{{ STATIC_URL }}js/redips_drag/redips-drag-min.js"></script>
		<script type="text/javascript" src="{{ STATIC_URL }}js/redips_drag/script.js"></script>
{% endblock %}
