<!-- script language="JavaScript" type="text/javascript">
$(document).ready(function() {
    $('table.batch_assignments').DataTable( {
        "scrollY":        "200px",
        "scrollCollapse": true,
        "paging":         false
    } );
} );
</script -->
{% extends 'form.html' %}
{% block title %}
    Select Questions for {{ batch.survey.name.capitalize }} - {{ batch.name.capitalize }}
{% endblock %}
{% block extra_css %}
	<link rel="stylesheet" href="{{ STATIC_URL }}js/redips_drag/style.css" />
	<style type="text/css">
/*.table {
	font-family:Arial, Helvetica, sans-serif;
	color:#666;
	font-size:12px;
	text-shadow: 1px 1px 0px #fff;
	background:#eaebec;
	margin:20px;
	border:#ccc 1px solid;

	-moz-border-radius:3px;
	-webkit-border-radius:3px;
	border-radius:3px;

	-moz-box-shadow: 0 1px 2px #d1d1d1;
	-webkit-box-shadow: 0 1px 2px #d1d1d1;
	box-shadow: 0 1px 2px #d1d1d1;
}*/

div.batch_assignment {
		height: 10%;
		max-height: 50%;
		overflow:  auto;
		width: 48%;
		margin-left: 1%;

}

 #batch_assignment td {
	text-align: left;
}

th.theader {
	text-align: center;

}

th.question, td.question {
	width: 35%;
}

th.code, td.code {
	width: 10%;

}



table.question_headers {
	margin-left: -5px;
}

table {
		text-align: center;
		color: #005580;
		margin: 0;
		padding: 0;
		}

table tr {
		padding:11px 15px 12px 15px;

		}

table a:link {
	color: #666;
	font-weight: bold;
	text-decoration:none;
}
table a:visited {
	color: #999999;
	font-weight:bold;
	text-decoration:none;
}
table a:active,
table a:hover {
	color: #bd5a35;
	text-decoration:underline;
}

table th {
	padding:11px 15px 12px 15px;
	border-top:1px solid #fafafa;
	border-bottom:1px solid #e0e0e0;

	background: #ededed;
	background: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#ebebeb));
	background: -moz-linear-gradient(top,  #ededed,  #ebebeb);
}
table th:first-child{
	padding-left:20px;
}
table tr:first-child th:first-child{
	-moz-border-radius-topleft:3px;
	-webkit-border-top-left-radius:3px;
	border-top-left-radius:3px;
}
table tr:first-child th:last-child{
	-moz-border-radius-topright:3px;
	-webkit-border-top-right-radius:3px;
	border-top-right-radius:3px;
}
table tr{
	text-align: center;
	padding-left:20px;

}
table tr td:first-child{
	text-align: center;
	padding-left:20px;
	border-left: 0;
}
.tabletrtd {
	padding:10px;
	border-top: 1px solid #ffffff;
	border-bottom:1px solid #e0e0e0;
	border-left: 1px solid #e0e0e0;

	background: #fafafa;
	background: -webkit-gradient(linear, left top, left bottom, from(#fbfbfb), to(#fafafa));
	background: -moz-linear-gradient(top,  #fbfbfb,  #fafafa);
}
table tr.even td{
	background: #f6f6f6;
	background: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#f6f6f6));
	background: -moz-linear-gradient(top,  #f8f8f8,  #f6f6f6);
}
table tr:last-child td{
	border-bottom:0;
}
table tr:last-child td:first-child{
	-moz-border-radius-bottomleft:3px;
	-webkit-border-bottom-left-radius:3px;
	border-bottom-left-radius:3px;
}
table tr:last-child td:last-child{
	-moz-border-radius-bottomright:3px;
	-webkit-border-bottom-right-radius:3px;
	border-bottom-right-radius:3px;
}
table tr:hover td{
	background: #ffffff;
	background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#ffffff));
	background: -moz-linear-gradient(top,  #f2f2f2,  #f0f0f0);
}

        .theader
        {
        color:#0099FF;
        padding-left: 80px;
        background: #ffffff;
        }

		#batch_questions {
			margin-top: -17px;
		}
	.forleft
		{
		position: relative;
		top:20px;
		left:35;
		}

		th.code {
			padding-left: 130px;
			padding-right: 90px;
		}
	</style>
{% endblock %}
{% block pre_form_content %}
	<div class="filter-form right">
		{% include "horizontal_naked_form.html" with a_form=question_filter_form %}
    </div>
    <div class="forleft">
    	{% include "search_form.html" with id="library_search_form" placeholder='search with text or code' %}
    </div>
       <div id="batch_assignment" class="clear">
		   <br />
		   <div class="batch_assignment" style="float: left;">
				<table width="100%">
					<thead>
						<tr><th  colspan="3">Library Questions</th></tr>
						<tr><th width="29%" class="code">Code</th><th width="71%">Text</th></tr>
					</thead>
				</table>
				<div class="scrollit">
					<table id="lib_questions_table">
						 <tbody>
						{% for question in library_questions %}
							<tr class="rd ms-selectable" id="{{question.pk}}-selectable" onclick="Move(this);" title="click to move">
								<td class="tabletrtd code">
									<div align="center" class="hide">
										<input type="hidden" name="identifier" value="{{question.identifier}}" />
										<input type="hidden" name="text" value="{{question.text}}" />
										<input type="hidden" name="answer_type" value="{{question.answer_type}}" />
										<input type="hidden" name="module" value="{{question.module}}" />
										<input type="hidden" name="group" value="{{question.group}}" />
									</div>
									{{question.identifier}}
								</td>
								<td class="tabletrtd question">{{question.text}}</td>
							</tr>
						{% endfor %}
						 </tbody>
					</table>
				</div>
			</div>
{% endblock %}
{% block display_form_fields %}
		   		<div class="batch_assignment" style="float: right;">
					<table width="100%">
					<thead>
						<tr><th  colspan="3">Batch Questions</th></tr>
						<tr><th width="29%" class="code">Code</th><th width="71%">Text</th></tr>
					</thead>
				</table>
					<div class="scrollit">
						<br>
						<table id="batch_questions">
							<tbody></tbody>
						</table>
					</div>
				</div>
				<input type="hidden" value="{{ batch.id }}" id="batch_id">
		   	<br class="clear" />

{% endblock %}
{% block non_form_content %}
	</div>
{% endblock %}
{% block javascripts %}
<script type="text/javascript" src="{{ STATIC_URL }}js/batch.js"></script>
{% comment %}
		<script type="text/javascript" src="{{ STATIC_URL }}js/redips_drag/redips-drag-min.js"></script>
		<script type="text/javascript" src="{{ STATIC_URL }}js/redips_drag/script.js"></script>
{% endcomment %}

<script type="text/javascript">
<!--$(document).ready( function () {-->
	<!--libTable =  $('lib_questions_table').dataTable();-->
	<!--batchTable =  $('batch_questions').dataTable();-->
	<!--alert(libTable);-->
	<!--});-->

function Move(tr){
 while (tr.parentNode&&tr.nodeName.toUpperCase()!='TR'){
  tr=tr.parentNode
 }
 var table1=document.getElementById('lib_questions_table');
 if (!this.rows){
  var rows=table1.getElementsByTagName('TR');
  this.rows=[];
  for (var z0=0;z0<rows.length;z0++){
   this.rows[z0]=rows[z0];
   <!--alert(rows[z0].style.background);-->
   <!--if(z0%2 == 1) {-->
		<!--this.rows[z0].style.background = '#005580;';-->
   <!--}-->
   <!--else-->
   <!--{-->
		<!--this.rows[z0].style.background = 'white;';-->
   <!--}-->
  }
 }
 var table2=document.getElementById('batch_questions');
 if (tr.parentNode!=table2){
  table2.appendChild(tr);
 }
 else {
  table1.appendChild(tr);
  for (var z0=0;z0<this.rows.length;z0++){
   if (this.rows[z0].parentNode==table1){
	table1.appendChild(this.rows[z0]);
   }
  }
 }

 <!--&lt;!&ndash;$('lib_questions_table').dataTable();&ndash;&gt;-->
 <!--libTable.fnDraw();-->
 <!--&lt;!&ndash;$('batch_questions').dataTable();&ndash;&gt;-->
 <!--batchTable.fnDraw();-->
}

</script>
{% endblock %}
