{% load chart_template_tags %}
{% if locations|can_display_location_based_chart %}
  <div id="multichoice-bar-chart" class="chart"></div>
  <br><br>
  <div id="multichoice-stacked-bar-chart" class="chart"></div>
  <script type="text/javascript" charset="utf-8">
      window.multi_choice_bar_chart_data = {
          'title-text': '{{ formula.name }} for {{ locations.selected_location.name }}',
          'xAxis-text': '{{ locations|title_for_location_type }}',
          'yAxis-text': 'Percentage',
          'xAxis-categories': {{ computed_value|multi_choice_options|safe }},
          'series': [{
              name: '{{ formula.indicator.name }}',
              data: {{ computed_value|get_values }}
          }]
      }

      window.multi_choice_stacked_bar_chart_data = {
        'title-text': '{{ formula|title_for_barchart:locations }}',
        'xAxis-text': '{{ locations|title_for_location_type }}',
        'yAxis-text': 'Percentage',
        'xAxis-categories': {{ hierarchial_data|location_names|safe }},
        'series': {{ hierarchial_data|get_computational_value_by_answer|safe }}
      }

      window.multi_choice_stacked_bar_chart_data['length'] = window.multi_choice_stacked_bar_chart_data['series'][0]['data'].length
  </script>

{% else %}
  <div class="hero-unit">
      {% if weights %}
        <strong>Weight for the location:</strong> {{ weights }}
      {% endif %}
  </div>
  <div id="multichoice-bar-chart" class="chart"></div>
  <br><br>
  <script type="text/javascript" charset="utf-8">
      window.multi_choice_bar_chart_data = {
          'title-text': '{{ formula.name }} for {{ locations.selected_location.name }}',
          'xAxis-text': '{{ locations|title_for_location_type }}',
          'yAxis-text': 'Percentage',
          'xAxis-categories': {{ computed_value|multi_choice_options|safe }},
          'series': [{
              name: '{{ formula.indicator.name }}',
              data: {{ computed_value|get_values }}
          }]
      }
  </script>
  <h4>
    Household answer summary:
  </h4>
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>Household head's Name</th>
        <th>{{ formula.numerator.text }}</th>
        <th>{{ formula.denominator.text }}</th>
      </tr>
    </thead>
    <tbody>
      {% for household, answer in household_data.items %}
      <tr>
        <td>{{ household.get_head.surname }}</td>
        <td>{{ answer|get_numerator:formula }}</td>
        <td>{{ answer|get_denominator:formula }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}