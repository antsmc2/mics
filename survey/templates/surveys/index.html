{% extends "layout.html" %}
{% block title %}
  Survey List
{% endblock %}
{% block content %}
{% load pagination_tags %}
{% autopaginate surveys 50 %}
  <h3>
    Survey List
  </h3>
  <a href="#new_survey" data-toggle="modal" class="btn btn_primary pull-right" id="add_survey">Create New Survey</a>
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>
          Name
        </th>
        <th>
          Description
        </th>
        <th>
          Type
        </th>
        <th>
          Number of Households per Investigator
        </th>
        <th>
          Actions
        </th>
      </tr>
    </thead>
    <tbody>
      {% for survey in surveys %}
        <tr>
          <td>
            <a href="{% url 'batch_index_page' survey.id %}">{{ survey.name }}</a>
          </td>
          <td>
            {{ survey.description }}
          </td>
          <td>
              {% if survey.type %}Aggregate{% else %}Roster{% endif %}
          </td>
          <td>
              {{ survey.sample_size }}
          </td>
          <td>
            <a href='{% url "edit_survey_page" survey.id %}'>Edit</a>
            <a data-toggle="modal" href="#delete_survey_{{survey.id}}">Delete</a>
            <a href='{% url 'new_batch_page' survey.pk %}' class="add_batch">Add Batch</a>
              {% include "surveys/delete.html" with survey=survey %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
    <div class="modal fade hide" id="new_survey" tabindex="-1" role="dialog"  aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">New Survey</h4>
              </div>
              <div class="modal-body">
                {% include "surveys/new_survey.html" with title="" action="/surveys/new/" button_label="Save" %}
              </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

  {% paginate %}
{% endblock %}